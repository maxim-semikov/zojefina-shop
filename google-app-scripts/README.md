# Google Apps Script

–°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –º–∞–≥–∞–∑–∏–Ω–∞ [Zojefina](https://zojefina.shop).

## –ü—Ä–æ–µ–∫—Ç—ã

### üì¶ [orders-processing](orders-processing/)
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ –≥–æ—Ç–æ–≤–∫–∏ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤:
- `buildCookingPlanByDate.js` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –≥–æ—Ç–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–∞–º
- `importAllOrders.js` - –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
- `invoice.js` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—á–µ—Ç–æ–≤
- `main.js` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –º–µ–Ω—é –∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- `utils.js` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### üîó [tilda-webhook-import-orders](tilda-webhook-import-orders/)
–ò–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤ –∏–∑ Tilda —á–µ—Ä–µ–∑ webhook –≤ Google Sheets:
- `main.js` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook –æ—Ç Tilda
- `config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- `token.js` - —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- `protectRawSheet.js` - –∑–∞—â–∏—Ç–∞ –ª–∏—Å—Ç–∞ —Å —Å—ã—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- `utils.js` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `appsscript.json` - –º–∞–Ω–∏—Ñ–µ—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

## –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Google**
   ```bash
   clasp login
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**
   
   –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω—É–∂–µ–Ω —Ñ–∞–π–ª `.clasp.json` —Å Script ID –∏–∑ Google Apps Script.
   
   **–ö–∞–∫ –Ω–∞–π—Ç–∏ Script ID:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ [Google Apps Script](https://script.google.com)
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ ‚öôÔ∏è "Project Settings"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ "Script ID"
   
   **–°–æ–∑–¥–∞–π—Ç–µ `.clasp.json`** –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
   ```json
   {
     "scriptId": "–í–ê–®_SCRIPT_ID",
     "rootDir": "."
   }
   ```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É—è helper-—Å–∫—Ä–∏–ø—Ç):
```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Google
./deploy.sh orders-processing push
./deploy.sh tilda-webhook push

# –ü–æ–ª—É—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Google
./deploy.sh orders-processing pull
./deploy.sh tilda-webhook pull

# –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
./deploy.sh orders-processing open
./deploy.sh tilda-webhook open
```

#### –ù–∞–ø—Ä—è–º—É—é (–∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞):
```bash
cd orders-processing  # –∏–ª–∏ tilda-webhook-import-orders

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Google Apps Script
clasp push

# –°–∫–∞—á–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Google Apps Script
clasp pull

# –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
clasp open

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å
clasp status

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
clasp push --watch
```

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

1. **–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã:** `clasp pull` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. **–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã** –ª–æ–∫–∞–ª—å–Ω–æ –≤ VS Code
3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `clasp push` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ Google
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** –≤ Google Apps Script, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- `.clasp.json` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` –∏ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è (—Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π Script ID)
- `appsscript.json` - –º–∞–Ω–∏—Ñ–µ—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º `clasp pull` –º–æ–≥—É—Ç —Å–∫–∞—á–∞—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ Google

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–û—à–∏–±–∫–∞ –ø—Ä–∏ push/pull:**
```bash
clasp logout
clasp login
```

**–ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
clasp clone YOUR_SCRIPT_ID
```

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è clasp](https://github.com/google/clasp)
- [Google Apps Script](https://script.google.com)
- [Google Apps Script API](https://developers.google.com/apps-script/api)
