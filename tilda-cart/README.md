# Tilda Cart Modifications

Модификации корзины для сайта [Zojefina](https://zojefina.shop) на платформе Tilda.

## Файлы

### `t-cart-gropuping.js`
Основной исходник — логика группировки товаров в корзине. Используется для разработки и как источник для минификации.

### `prod-min-ver.js`
Минифицированная версия `t-cart-gropuping.js`. Подключается в настройках сайта Tilda и не содержит конфигурацию.

### `cart-config.js`
Конфигурация инициализации скрипта. Задаёт параметры группировки под конкретный сайт — поле группировки, порядок и названия групп, расчётные поля и CSS-классы. Этот файл вставляется вручную прямо в редакторе Tilda и не нуждается в минификации.

---

## Подключение к сайту Tilda

Оба фрагмента вставляются в **Настройки сайта** (не страницы) → **Еще** → **HTML-код для вставки перед `</body>`**.

### Шаг 1 — основной скрипт

Вставьте содержимое `prod-min-ver.js` первым блоком:

```html
<script>
  /* содержимое prod-min-ver.js */
</script>
```

### Шаг 2 — конфигурация

Вставьте содержимое `cart-config.js` вторым блоком (после основного скрипта) и отредактируйте параметры под ваш сайт:

```html
<script>
  document.addEventListener("DOMContentLoaded", () => {
    if (typeof window.t_onFuncLoad === "function") {
      window.t_onFuncLoad("tcart__reDrawProducts", () => {
        tildaCartGrouping.init({
          groupByField: "День приема",
          groupOrder: ["Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Вс"],
          // ... остальные параметры
        });
      });
    }
  });
</script>
```

---

## Разработка

1. Редактируйте исходник `t-cart-gropuping.js`
2. Тестируйте на тестовой странице Tilda
3. Минифицируйте в `prod-min-ver.js`
4. Обновите код в настройках сайта Tilda

### Минификация

Онлайн: [Terser REPL](https://try.terser.org/) или [JavaScript Minifier](https://javascript-minifier.com/)

Или локально:
```bash
npm install -g terser
terser t-cart-gropuping.js -c -m -o prod-min-ver.js
```

## Важные замечания

- `cart-config.js` не минифицируется — его редактируют вручную прямо в редакторе Tilda
- Основной скрипт должен быть подключён **до** конфигурации
- Корзина Tilda использует глобальные переменные `window.tcart`
- При обновлении проверяйте совместимость с текущей версией Tilda
